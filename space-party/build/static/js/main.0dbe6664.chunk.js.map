{"version":3,"sources":["celestialBodies/celestialBodies.js","celestialBodies/orbitalElements.js","celestialBodies/pertubations.js","celestialBodies/positions.js","ui/DateTime.js","ui/SliderInput.js","Settings.js","Sketch.js","App.js","utility.js","serviceWorker.js","index.js","celestialBodies/utility.js"],"names":["getDaysFrom2000","require","getAllOrbitalElements","applyPertubations","calculatePositions","getCelestialBodies","day","bodies","module","console","dir","exports","wrapDeg","rectangularToEclipticSphere","rad2deg","abs","sqrt","sin_d","cos_d","atan2_d","constants","sun","N_offset","N_scalar","i_offset","i_scalar","w_offset","w_scalar","a_offset","a_scalar","e_offset","e_scalar","M_offset","M_scalar","moon","mercury","venus","earth","mars","jupiter","saturn","uranus","neptune","elements","Object","entries","forEach","key","value","cnst","el","N","i","w","a","e","M","L","E0","E1","temp","E","x","y","r","v","eclipticRect","z","eclipticSphere","longitude","getOrbitalElements","eclipticalSphereToRectangular","Ms","F","D","pertubations","latitude","radius","applyMoonPertubations","Mj","applyJupiterPertubations","applySaturnPertubations","Mu","applyUranusPertubations","earthRadiiPerAU","wrapHours","rectangularToEquatorialSphere","eclipticalToEquatorial","earthTiltDeg","obl_ecl","n","b","eclipticRectHelio","eclipticSphereHelio","eclipticRectGeo","add","eclipticSphereGeo","subtract","name","equatorialRectGeo","equatorialSphereGeo","rightAscention","moment","locale","DateTime","date","setDate","libInstance","utils","DateMomentUtils","variant","inputVariant","format","label","minDate","Date","maxDate","onChange","autoOk","SliderInputStyle","styled","display","gridTemplateColumns","SliderInput","title","min","max","step","marks","Typography","gutterBottom","Slider","val","valueLabelDisplay","Input","margin","target","inputProps","type","SettingsStyle","Settings","settings","setSettings","prev","daysPerSecond","distanceScaleIterations","distanceScaleMin","distanceScaleMax","dateTo2000Offset","deg2rad","millisInDay","CanvasContainerStyle","Sketch","settingsRef","parentRef","React","createRef","useEffect","_","lastFrameMillis","parent","current","getBoundingClientRect","width","height","u","Math","sketchRadius","distScale","bodySize","textSize","p5","p","setup","createCanvas","stroke","fill","textAlign","CENTER","now","draw","background","translate","thetaStep","PI","halfThetaStep","theta","x1","cos","y1","sin","x2","y2","x3","y3","noStroke","text","zodiac","strokeWeight","line","drawZodiac","thisFrameMillis","deltaMillis","dateObj","lastDate","_isAMomentObject","_d","millis","getTime","nextDate","celestialBodies","body","p0","p1","p2","p3","t","iterations","bezier","iterateBezier","drawBody","drawEclipticSphereGeo","it","pow","ellipse","id","ref","theme","createMuiTheme","palette","primary","AppStyle","color","wordWrap","boxSizing","MozBoxSizing","WebkitBoxSizing","fontFamily","minHeight","gridTemplateRows","gridTemplateAreas","HeaderFooterStyle","gridArea","backgroundColor","HeaderStyle","FooterStyle","ContentStyle","App","initialValue","useState","state","setState","stateRef","useRef","useRefState","ThemeProvider","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","rad2hours","hours2rad","log","exp","y2000Millis","UTC","metersPerAU","floor","cbrt","equatorialSphereToRectangular","declination","atan2","equatorialToEcliptical","year","month","hour","minute","second","millisecond","d","setUTCHours","setUTCFullYear","utcMillis","tan_d","tan"],"mappings":"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","file":"static/js/main.0dbe6664.chunk.js","sourcesContent":["\r\nconst { getDaysFrom2000 } = require('./utility');\r\nconst getAllOrbitalElements = require('./orbitalElements');\r\nconst applyPertubations = require('./pertubations');\r\nconst calculatePositions = require('./positions');\r\n\r\n\r\nfunction getCelestialBodies(day) {\r\n\tconst bodies = getAllOrbitalElements(day)\r\n\tapplyPertubations(bodies)\r\n\tcalculatePositions(bodies, day)\r\n\r\n\treturn bodies\r\n\r\n}\r\n\r\n\r\nif (require.main === module) {\r\n\tconst day = getDaysFrom2000(1990, 4, 19)\r\n\tconst bodies = getCelestialBodies(day)\r\n\tconsole.dir(bodies);\r\n}\r\n\r\nmodule.exports = getCelestialBodies\r\n\r\n\r\n/*\r\nexample output:\r\nsun: {\r\n    N: 0,\r\n    i: 0,\r\n    w: 282.7735477295,\r\n    a: 1,\r\n    e: 0.016713077993,\r\n    M: 104.06528413449996,\r\n    L: 26.838831863999985,\r\n    E: 104.99038551447352,\r\n    x: -0.27537003282124345,\r\n    y: 0.9658343236151069,\r\n    r: 1.0043229538594765,\r\n    v: 105.91343617758396,\r\n    eclipticRect: { x: 0.8810475691133732, y: 0.4820993430906537, z: 0 },\r\n    eclipticSphere: {\r\n      radius: 1.0043229538594765,\r\n      longitude: 28.686983907083956,\r\n      latitude: 0\r\n    },\r\n    eclipticRectGeo: { x: 0.8810475691133732, y: 0.4820993430906537, z: 0 },\r\n    eclipticSphereGeo: {\r\n      radius: 1.0043229538594765,\r\n      longitude: 28.686983907083956,\r\n      latitude: 0\r\n    },\r\n    eclipticRectHelio: { x: 0, y: 0, z: 0 },\r\n    eclipticSphereHelio: { radius: 0, longitude: 0, latitude: 0 },\r\n    name: 'sun',\r\n    equatorialRectGeo: {\r\n      x: 0.8810475691133732,\r\n      y: 0.44231324442489217,\r\n      z: 0.1917779195182946\r\n    },\r\n    equatorialSphereGeo: {\r\n      radius: 1.0043229538594765,\r\n      rightAscention: 1.7772048282505475,\r\n      declination: 11.00837277279888\r\n    }\r\n  },\r\n\r\n\r\n\r\n*/","const {\r\n\twrapDeg,\r\n\t// cbrt,\r\n\t// equatorialSphereToRectangular,\r\n\t// eclipticalSphereToRectangular,\r\n\t// rectangularToEquatorialSphere,\r\n\trectangularToEclipticSphere,\r\n\t// eclipticalToEquatorial,\r\n\t// equatorialToEcliptical,\r\n\tgetDaysFrom2000,\r\n\t// millisInDay,\r\n\t// y2000Millis,\r\n\t// deg2rad,\r\n\trad2deg,\r\n\t// earthTiltDeg,\r\n\tabs,\r\n\tsqrt,\r\n\t// log,\r\n\t// exp,\r\n\tsin_d,\r\n\tcos_d,\r\n\t// tan_d,\r\n\tatan2_d\r\n} = require('./utility');\r\n/*\r\nThe primary orbital elements are here denoted as:\r\n    N = longitude of the ascending node\r\n    i = inclination to the ecliptic (plane of the Earth's orbit)\r\n    w = argument of perihelion\r\n    a = semi-major axis, or mean distance from Sun\r\n    e = eccentricity (0=circle, 0-1=ellipse, 1=parabola)\r\n    M = mean anomaly (0 at perihelion; increases uniformly with time)\r\n\r\n\tRelated orbital elements are:\r\n    w1 = N + w   = longitude of perihelion\r\n    L  = M + w1  = mean longitude\r\n    q  = a*(1-e) = perihelion distance\r\n    Q  = a*(1+e) = aphelion distance\r\n    P  = a ^ 1.5 = orbital period (years if a is in AU, astronomical units)\r\n    T  = Epoch_of_M - (M(deg)/360_deg) / P  = time of perihelion\r\n    v  = true anomaly (angle between position and perihelion)\r\n    E  = eccentric anomaly\r\n\t*/\r\n\r\nconst constants = {\r\n\tsun: {\r\n\t\tN_offset: 0,\t\t\t//Longitude of asc. node, point where the body passes from negative to positive latitude on the ecliptic\r\n\t\tN_scalar: 0,\r\n\t\ti_offset: 0,\t\t\t//Inclination\r\n\t\ti_scalar: 0,\r\n\t\tw_offset: 282.9404,\t\t//Longitude of perihelion\r\n\t\tw_scalar: 4.70935E-5,\r\n\t\ta_offset: 1.000000,\t\t//mean distance, a.u.\r\n\t\ta_scalar: 0,\r\n\t\te_offset: 0.016709,\t\t//eccentricity\r\n\t\te_scalar: -1.151E-9,\r\n\t\tM_offset: 356.0470,\t\t//mean anomaly\r\n\t\tM_scalar: 0.9856002585,\r\n\t},\r\n\tmoon: {\r\n\t\tN_offset: 125.1228,\r\n\t\tN_scalar: -0.0529538083,\r\n\t\ti_offset: 5.1454,\r\n\t\ti_scalar: 0,\r\n\t\tw_offset: 318.0634,\r\n\t\tw_scalar: 0.1643573223,\t//(Arg. of perigee)\r\n\t\ta_offset: 60.2666,//earth radii\r\n\t\ta_scalar: 0,\r\n\t\te_offset: 0.054900,\r\n\t\te_scalar: 0,\r\n\t\tM_offset: 115.3654,\r\n\t\tM_scalar: 13.0649929509,\r\n\t},\r\n\r\n\tmercury: {\r\n\t\tN_offset: 48.3313,\r\n\t\tN_scalar: 3.24587E-5,\r\n\t\ti_offset: 7.0047,\r\n\t\ti_scalar: 5.00E-8,\r\n\t\tw_offset: 29.1241,\r\n\t\tw_scalar: 1.01444E-5,\r\n\t\ta_offset: 0.387098,\r\n\t\ta_scalar: 0,\r\n\t\te_offset: 0.205635,\r\n\t\te_scalar: 5.59E-10,\r\n\t\tM_offset: 168.6562,\r\n\t\tM_scalar: 4.0923344368\r\n\t},\r\n\tvenus: {\r\n\t\tN_offset: 76.6799,\r\n\t\tN_scalar: 2.46590E-5,\r\n\t\ti_offset: 3.3946,\r\n\t\ti_scalar: 2.75E-8,\r\n\t\tw_offset: 54.8910,\r\n\t\tw_scalar: 1.38374E-5,\r\n\t\ta_offset: 0.723330,\r\n\t\ta_scalar: 0,\r\n\t\te_offset: 0.006773,\r\n\t\te_scalar: -1.302E-9,\r\n\t\tM_offset: 48.0052,\r\n\t\tM_scalar: 1.6021302244,\r\n\t},\r\n\tearth: {//values copied from sun with N flipped 180\r\n\t\tN_offset: 180,\r\n\t\tN_scalar: 0,\r\n\t\ti_offset: 0,\r\n\t\ti_scalar: 0,\r\n\t\tw_offset: 282.9404,\r\n\t\tw_scalar: 4.70935E-5,\r\n\t\ta_offset: 1.000000,\r\n\t\ta_scalar: 0,\r\n\t\te_offset: 0.016709,\r\n\t\te_scalar: -1.151E-9,\r\n\t\tM_offset: 356.0470,\r\n\t\tM_scalar: 0.9856002585,\r\n\t},\r\n\tmars: {\r\n\t\tN_offset: 49.5574,\r\n\t\tN_scalar: 2.11081E-5,\r\n\t\ti_offset: 1.8497,\r\n\t\ti_scalar: -1.78E-8,\r\n\t\tw_offset: 286.5016,\r\n\t\tw_scalar: 2.92961E-5,\r\n\t\ta_offset: 1.523688,\r\n\t\ta_scalar: 0,\r\n\t\te_offset: 0.093405,\r\n\t\te_scalar: 2.516E-9,\r\n\t\tM_offset: 18.6021,\r\n\t\tM_scalar: 0.5240207766,\r\n\t},\r\n\tjupiter: {\r\n\t\tN_offset: 100.4542,\r\n\t\tN_scalar: 2.76854E-5,\r\n\t\ti_offset: 1.3030,\r\n\t\ti_scalar: -1.557E-7,\r\n\t\tw_offset: 273.8777,\r\n\t\tw_scalar: 1.64505E-5,\r\n\t\ta_offset: 5.20256,\r\n\t\ta_scalar: 0,\r\n\t\te_offset: 0.048498,\r\n\t\te_scalar: 4.469E-9,\r\n\t\tM_offset: 19.8950,\r\n\t\tM_scalar: 0.0830853001,\r\n\t},\r\n\tsaturn: {\r\n\t\tN_offset: 113.6634,\r\n\t\tN_scalar: 2.38980E-5,\r\n\t\ti_offset: 2.4886,\r\n\t\ti_scalar: -1.081E-7,\r\n\t\tw_offset: 339.3939,\r\n\t\tw_scalar: 2.97661E-5,\r\n\t\ta_offset: 9.55475,\r\n\t\ta_scalar: 0,\r\n\t\te_offset: 0.055546,\r\n\t\te_scalar: -9.499E-9,\r\n\t\tM_offset: 316.9670,\r\n\t\tM_scalar: 0.0334442282,\r\n\t},\r\n\turanus: {\r\n\t\tN_offset: 74.0005,\r\n\t\tN_scalar: 1.3978E-5,\r\n\t\ti_offset: 0.7733,\r\n\t\ti_scalar: 1.9E-8,\r\n\t\tw_offset: 96.6612,\r\n\t\tw_scalar: 3.0565E-5,\r\n\t\ta_offset: 19.18171,\r\n\t\ta_scalar: -1.55E-8,//Grand Uranus-Neptune term\r\n\t\te_offset: 0.047318,\r\n\t\te_scalar: 7.45E-9,\r\n\t\tM_offset: 142.5905,\r\n\t\tM_scalar: 0.011725806,\r\n\t},\r\n\tneptune: {\r\n\t\tN_offset: 131.7806,\r\n\t\tN_scalar: 3.0173E-5,\r\n\t\ti_offset: 1.7700,\r\n\t\ti_scalar: -2.55E-7,\r\n\t\tw_offset: 272.8461,\r\n\t\tw_scalar: -6.027E-6,\r\n\t\ta_offset: 30.05826,\r\n\t\ta_scalar: 3.313E-8,//Grand Uranus-Neptune term\r\n\t\te_offset: 0.008606,\r\n\t\te_scalar: 2.15E-9,\r\n\t\tM_offset: 260.2471,\r\n\t\tM_scalar: 0.005995147,\r\n\t},\r\n\r\n\r\n}\r\n\r\n\r\nfunction getOrbitalElements(day, cnst) {\r\n\r\n\t///CALCULATE PRIMARY ELEMENTS\r\n\tconst el = {\r\n\t\tN: wrapDeg(cnst.N_offset + cnst.N_scalar * day),\r\n\t\ti: wrapDeg(cnst.i_offset + cnst.i_scalar * day),\r\n\t\tw: wrapDeg(cnst.w_offset + cnst.w_scalar * day),\r\n\t\ta: wrapDeg(cnst.a_offset + cnst.a_scalar * day),\r\n\t\te: wrapDeg(cnst.e_offset + cnst.e_scalar * day),\r\n\t\tM: wrapDeg(cnst.M_offset + cnst.M_scalar * day)\r\n\t}\r\n\tconst { N, i, w, a, e, M } = el\r\n\r\n\t//CALCULATE SECONDARY ELEMENTS\r\n\r\n\tel.L = wrapDeg(N + w + M)\r\n\tlet E0 = M + rad2deg * e * sin_d(M) * (1 + e * cos_d(M))\r\n\tlet E1 = 0\r\n\tdo {\r\n\t\tlet temp = E0\r\n\t\tE0 = E1\r\n\t\tE1 = temp - (temp - rad2deg * e * sin_d(temp) - M) / (1 - e * cos_d(temp))\r\n\t\t// console.log(`${planetType} ecc diff: ${abs(E1 - E0)}`);\r\n\t}\r\n\twhile (abs(E1 - E0) > 0.005)\r\n\tel.E = E1\r\n\r\n\tel.x = a * (cos_d(el.E) - e)\r\n\tel.y = a * sqrt(1 - e * e) * sin_d(el.E)\r\n\tel.r = sqrt(el.x * el.x + el.y * el.y)\r\n\tel.v = wrapDeg(atan2_d(el.y, el.x))//is wrapDeg nessecary? ie is negative bad?\r\n\r\n\tel.eclipticRect = {\r\n\t\tx: el.r * (cos_d(N) * cos_d(el.v + w) - sin_d(N) * sin_d(el.v + w) * cos_d(i)),\r\n\t\ty: el.r * (sin_d(N) * cos_d(el.v + w) + cos_d(N) * sin_d(el.v + w) * cos_d(i)),\r\n\t\tz: el.r * sin_d(el.v + w) * sin_d(i)\r\n\t}\r\n\r\n\tel.eclipticSphere = rectangularToEclipticSphere(el.eclipticRect)\r\n\tel.eclipticSphere.longitude = wrapDeg(el.eclipticSphere.longitude)//nesecary?\r\n\r\n\r\n\treturn el\r\n}\r\n\r\nfunction getAllOrbitalElements(day) {\r\n\tconst elements = {}\r\n\tObject.entries(constants).forEach(([key, value]) => {\r\n\t\telements[key] = getOrbitalElements(day, value)\r\n\t})\r\n\treturn elements\r\n}\r\n\r\n\r\nif (require.main === module) {\r\n\tconst day = getDaysFrom2000(1990, 3, 19)\r\n\tconst elements = getAllOrbitalElements(day)\r\n\tconsole.dir(elements);\r\n}\r\n\r\nmodule.exports = getAllOrbitalElements","const {\r\n\t// wrapDeg,\r\n\t// cbrt,\r\n\t// equatorialSphereToRectangular,\r\n\teclipticalSphereToRectangular,\r\n\t// rectangularToEquatorialSphere,\r\n\t// rectangularToEclipticSphere,\r\n\t// eclipticalToEquatorial,\r\n\t// equatorialToEcliptical,\r\n\t// getDaysFrom2000,\r\n\t// millisInDay,\r\n\t// y2000Millis,\r\n\t// deg2rad,\r\n\t// rad2deg,\r\n\t// earthTiltDeg,\r\n\t// abs,\r\n\t// atan2,\r\n\t// sqrt,\r\n\t// log,\r\n\t// exp,\r\n\tsin_d,\r\n\tcos_d,\r\n\t// tan_d,\r\n\t// atan2_d\r\n} = require('./utility');\r\n\r\nfunction applyMoonPertubations(sun, moon) {\r\n\tconst { N, M, L, } = moon\r\n\t// const { N, i, w, a, e, M, L, E, r, v } = moon\r\n\r\n\tconst Ms = sun.M\r\n\tconst F = L - N\r\n\tconst D = L - sun.L\r\n\tconst pertubations = {\r\n\t\tlongitude:\r\n\t\t\t-1.274 * sin_d(M - 2 * D)    //(Evection)\r\n\t\t\t+ 0.658 * sin_d(2 * D)        // (Variation)\r\n\t\t\t- 0.186 * sin_d(Ms)          //(Yearly equation)\r\n\t\t\t- 0.059 * sin_d(2 * M - 2 * D)\r\n\t\t\t- 0.057 * sin_d(M - 2 * D + Ms)\r\n\t\t\t+ 0.053 * sin_d(M + 2 * D)\r\n\t\t\t+ 0.046 * sin_d(2 * D - Ms)\r\n\t\t\t+ 0.041 * sin_d(M - Ms)\r\n\t\t\t- 0.035 * sin_d(D)            //(Parallactic equation)\r\n\t\t\t- 0.031 * sin_d(M + Ms)\r\n\t\t\t- 0.015 * sin_d(2 * F - 2 * D)\r\n\t\t\t+ 0.011 * sin_d(M - 4 * D),\r\n\t\tlatitude:\r\n\t\t\t-0.173 * sin_d(F - 2 * D)\r\n\t\t\t- 0.055 * sin_d(M - F - 2 * D)\r\n\t\t\t- 0.046 * sin_d(M + F - 2 * D)\r\n\t\t\t+ 0.033 * sin_d(F + 2 * D)\r\n\t\t\t+ 0.017 * sin_d(2 * M + F),\r\n\t\tradius:\r\n\t\t\t-0.58 * cos_d(M - 2 * D)\r\n\t\t\t- 0.46 * cos_d(2 * D)\r\n\t}\r\n\t//FOR TESTING ONLY\r\n\tmoon.eclipticSphere.longitude += pertubations.longitude\r\n\tmoon.eclipticSphere.latitude += pertubations.latitude\r\n\tmoon.eclipticSphere.radius += pertubations.radius\r\n\r\n\t// moon.eclipticSphere.radius = 1\r\n\t// moon.eclipticSphere.longitude = 306.9484\r\n\tmoon.eclipticRect = eclipticalSphereToRectangular(moon.eclipticSphere)\r\n}\r\n\r\nfunction applyJupiterPertubations(jupiter, saturn) {\r\n\tconst Mj = jupiter.M\r\n\tconst Ms = saturn.M\r\n\tconst pertubations = {\r\n\t\tlongitude:\r\n\t\t\t-0.332 * sin_d(2 * Mj - 5 * Ms - 67.6)\r\n\t\t\t- 0.056 * sin_d(2 * Mj - 2 * Ms + 21)\r\n\t\t\t+ 0.042 * sin_d(3 * Mj - 5 * Ms + 21)\r\n\t\t\t- 0.036 * sin_d(Mj - 2 * Ms)\r\n\t\t\t+ 0.022 * cos_d(Mj - Ms)\r\n\t\t\t+ 0.023 * sin_d(2 * Mj - 3 * Ms + 52)\r\n\t\t\t- 0.016 * sin_d(Mj - 5 * Ms - 69)\r\n\t}\r\n\tjupiter.eclipticSphere.longitude += pertubations.longitude\r\n\tjupiter.eclipticRect = eclipticalSphereToRectangular(jupiter.eclipticSphere)\r\n}\r\n\r\nfunction applySaturnPertubations(jupiter, saturn) {\r\n\tconst Mj = jupiter.M\r\n\tconst Ms = saturn.M\r\n\tconst pertubations = {\r\n\t\tlongitude:\r\n\t\t\t+0.812 * sin_d(2 * Mj - 5 * Ms - 67.6)\r\n\t\t\t- 0.229 * cos_d(2 * Mj - 4 * Ms - 2)\r\n\t\t\t+ 0.119 * sin_d(Mj - 2 * Ms - 3)\r\n\t\t\t+ 0.046 * sin_d(2 * Mj - 6 * Ms - 69)\r\n\t\t\t+ 0.014 * sin_d(Mj - 3 * Ms + 32),\r\n\t\tlatitude:\r\n\t\t\t-0.020 * cos_d(2 * Mj - 4 * Ms - 2)\r\n\t\t\t+ 0.018 * sin_d(2 * Mj - 6 * Ms - 49)\r\n\t}\r\n\tsaturn.eclipticSphere.longitude += pertubations.longitude\r\n\tsaturn.eclipticSphere.latitude += pertubations.latitude\r\n\tsaturn.eclipticRect = eclipticalSphereToRectangular(saturn.eclipticSphere)\r\n}\r\n\r\nfunction applyUranusPertubations(jupiter, saturn, uranus) {\r\n\tconst Mj = jupiter.M\r\n\tconst Ms = saturn.M\r\n\tconst Mu = uranus.M\r\n\tconst pertubations = {\r\n\t\tlongitude:\r\n\t\t\t+0.040 * sin_d(Ms - 2 * Mu + 6)\r\n\t\t\t+ 0.035 * sin_d(Ms - 3 * Mu + 33)\r\n\t\t\t- 0.015 * sin_d(Mj - Mu + 20)\r\n\t}\r\n\turanus.eclipticSphere.longitude += pertubations.longitude\r\n\turanus.eclipticRect = eclipticalSphereToRectangular(uranus.eclipticSphere)\r\n}\r\n\r\n\r\nfunction applyPertubations(bodies) {\r\n\tapplyMoonPertubations(bodies.sun, bodies.moon)\r\n\tapplyJupiterPertubations(bodies.jupiter, bodies.saturn)\r\n\tapplySaturnPertubations(bodies.jupiter, bodies.saturn)\r\n\tapplyUranusPertubations(bodies.jupiter, bodies.saturn, bodies.uranus)\r\n}\r\n\r\n\r\n\r\nmodule.exports = applyPertubations","const {\r\n\tearthRadiiPerAU,\r\n\t// wrapDeg,\r\n\twrapHours,\r\n\t// cbrt,\r\n\t// equatorialSphereToRectangular,\r\n\teclipticalSphereToRectangular,\r\n\trectangularToEquatorialSphere,\r\n\trectangularToEclipticSphere,\r\n\teclipticalToEquatorial,\r\n\t// equatorialToEcliptical,\r\n\t// getDaysFrom2000,\r\n\t// millisInDay,\r\n\t// y2000Millis,\r\n\t// deg2rad,\r\n\t// rad2deg,\r\n\tearthTiltDeg,\r\n\t// abs,\r\n\t// atan2,\r\n\t// sqrt,\r\n\t// log,\r\n\t// exp,\r\n\t// sin_d,\r\n\t// cos_d,\r\n\t// tan_d,\r\n\t// atan2_d\r\n} = require('./utility');\r\n\r\nfunction subtract(a, b) {\r\n\treturn {\r\n\t\tx: a.x - b.x,\r\n\t\ty: a.y - b.y,\r\n\t\tz: a.z - b.z\r\n\t}\r\n}\r\nfunction add(a, b) {\r\n\treturn {\r\n\t\tx: a.x + b.x,\r\n\t\ty: a.y + b.y,\r\n\t\tz: a.z + b.z\r\n\t}\r\n}\r\n\r\n\r\nfunction calculatePositions(bodies, day) {\r\n\tconst obl_ecl = earthTiltDeg - 3.563E-7 * day //obliquity of the ecliptic, decreasing\r\n\r\n\tconst helioBodies = [\"mercury\", \"venus\", \"earth\", \"mars\", \"jupiter\", \"saturn\", \"uranus\", \"neptune\"]\r\n\tconst geoBodies = [\"sun\", \"moon\"]\r\n\r\n\t// const sun = bodies.sun\r\n\thelioBodies.forEach(n => {\r\n\t\tconst b = bodies[n]\r\n\t\tb.eclipticRectHelio = b.eclipticRect\r\n\t\tb.eclipticSphereHelio = b.eclipticSphere\r\n\t\tb.eclipticRectGeo = add(b.eclipticRect, bodies.sun.eclipticRect)\r\n\t\tb.eclipticSphereGeo = rectangularToEclipticSphere(b.eclipticRectGeo)\r\n\t})\r\n\r\n\t//convert moon radius to AU\r\n\r\n\tbodies.moon.eclipticSphere.radius /= earthRadiiPerAU\r\n\tbodies.moon.eclipticRect = eclipticalSphereToRectangular(bodies.moon.eclipticSphere)\r\n\r\n\r\n\t//UNTESTED, NEED TO VISUALIZE\r\n\tgeoBodies.forEach(n => {\r\n\t\tconst b = bodies[n]\r\n\t\tb.eclipticRectGeo = b.eclipticRect\r\n\t\tb.eclipticSphereGeo = b.eclipticSphere\r\n\t\tb.eclipticRectHelio = subtract(b.eclipticRect, bodies.sun.eclipticRect)//confirmed\r\n\t\tb.eclipticSphereHelio = rectangularToEclipticSphere(b.eclipticRectHelio)//\r\n\t})\r\n\r\n\r\n\t//CALCULATE EQUATORIAL POSITION\r\n\tObject.entries(bodies).forEach(([key, value]) => {\r\n\t\tvalue.name = key\r\n\t\tvalue.equatorialRectGeo = eclipticalToEquatorial(value.eclipticRectGeo, obl_ecl)\r\n\t\tvalue.equatorialSphereGeo = rectangularToEquatorialSphere(value.equatorialRectGeo)\r\n\t\tvalue.equatorialSphereGeo.rightAscention = wrapHours(value.equatorialSphereGeo.rightAscention)//nessecary?\r\n\t\t// value.eclipticSphere\r\n\t})\r\n}\r\n\r\n\r\nmodule.exports = calculatePositions","import React from 'react';\r\nimport { styled } from '@material-ui/core/styles';\r\n\r\nimport DateMomentUtils from '@date-io/moment';\r\nimport moment from 'moment';\r\nimport {\r\n\tMuiPickersUtilsProvider,\r\n\tKeyboardDatePicker,\r\n\tKeyboardTimePicker\r\n} from '@material-ui/pickers';\r\nimport 'moment/locale/en-au';\r\n\r\nmoment.locale(\"en-au\")\r\n// const [locale, setLocale] = React.useState(\"en-au\")\r\n\r\n\r\nfunction DateTime({ date, setDate }) {\r\n\treturn <MuiPickersUtilsProvider libInstance={moment} utils={DateMomentUtils} locale={\"en-au\"}>\r\n\t\t<KeyboardDatePicker\r\n\t\t\tvariant=\"inline\"\r\n\t\t\tinputVariant=\"outlined\"\r\n\t\t\tformat=\"DD/MM/yyyy\"\r\n\t\t\tlabel=\"Date\"\r\n\t\t\tvalue={date}\r\n\t\t\tminDate={new Date(\"0001-01-01\")}\r\n\t\t\tmaxDate={new Date(\"2100-01-01\")}\r\n\t\t\tonChange={setDate}\r\n\t\t\tautoOk\r\n\t\t/>\r\n\t\t<KeyboardTimePicker\r\n\t\t\tvariant=\"inline\"\r\n\t\t\tinputVariant=\"outlined\"\r\n\t\t\tformat=\"h:mm A\"\r\n\t\t\tlabel=\"Time\"\r\n\t\t\t// ampm={false}\r\n\t\t\tvalue={date}\r\n\t\t\tonChange={setDate}\r\n\t\t\tautoOk\r\n\t\t/>\r\n\t</MuiPickersUtilsProvider>\r\n\r\n}\r\n\r\nexport default DateTime","import React from 'react';\r\nimport { styled } from '@material-ui/core/styles';\r\nimport { Slider, Input, Typography } from '@material-ui/core';\r\n\r\nconst SliderInputStyle = styled('div')({\r\n\t'&>div': {\r\n\t\tdisplay: 'grid',\r\n\t\tgridTemplateColumns: '1fr 5% 30%',\r\n\t\t// margin: '1rem'\r\n\t}\r\n})\r\n\r\nfunction SliderInput({ title, value, onChange, min = 0, max = 10, step = 1, marks = false }) {\r\n\treturn <SliderInputStyle>\r\n\t\t<Typography gutterBottom>{title}</Typography>\r\n\t\t<div>\r\n\t\t\t<Slider\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tonChange={(e, val) => onChange(val)}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tstep={step}\r\n\t\t\t\tmarks={marks}\r\n\t\t\t\tmin={min}\r\n\t\t\t\tmax={max}\r\n\t\t\t/>\r\n\t\t\t<span />\r\n\t\t\t<Input\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tmargin=\"dense\"\r\n\t\t\t\tonChange={e => onChange(e.target.value)}\r\n\t\t\t\tinputProps={{\r\n\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\tstep,\r\n\t\t\t\t\tmin,\r\n\t\t\t\t\tmax\r\n\t\t\t\t}}\r\n\t\t\t></Input>\r\n\t\t</div>\r\n\t</SliderInputStyle>\r\n}\r\n\r\nexport default SliderInput","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport { styled } from '@material-ui/core/styles';\r\nimport DateTime from './ui/DateTime';\r\nimport SliderInput from './ui/SliderInput';\r\n\r\nconst SettingsStyle = styled('div')({\r\n\tmargin: '1rem',\r\n\tdisplay: 'grid',\r\n\tgridTemplateColumns: '1fr',\r\n\t// gridTemplateRows: 'repeat(1fr,15)',\r\n\t'&> *': {\r\n\t}\r\n})\r\n\r\nconst Settings = ({ settings, setSettings }) => {\r\n\r\n\treturn <SettingsStyle>\r\n\t\t<Typography variant=\"h4\">Settings</Typography>\r\n\t\t<DateTime\r\n\t\t\tdate={settings.date}\r\n\t\t\tsetDate={date => setSettings(prev => ({ ...prev, date }))}\r\n\t\t/>\r\n\t\t<SliderInput\r\n\t\t\ttitle=\"Days Per Second\"\r\n\t\t\tvalue={settings.daysPerSecond}\r\n\t\t\tonChange={val => setSettings(prev => ({ ...prev, daysPerSecond: val }))}\r\n\t\t\tmin={0}\r\n\t\t\tmax={100}\r\n\t\t\tstep={0.01}\r\n\t\t/>\r\n\t\t<SliderInput\r\n\t\t\ttitle=\"Distance Scale Iterations\"\r\n\t\t\tvalue={settings.distanceScaleIterations}\r\n\t\t\tonChange={val => setSettings(prev => ({ ...prev, distanceScaleIterations: val }))}\r\n\t\t\tmin={0}\r\n\t\t\tmax={32}\r\n\t\t\tstep={1}\r\n\t\t/>\r\n\t\t<SliderInput\r\n\t\t\ttitle=\"Distance Scale Min\"\r\n\t\t\tvalue={settings.distanceScaleMin}\r\n\t\t\tonChange={val => setSettings(prev => ({ ...prev, distanceScaleMin: val }))}\r\n\t\t\tmin={0}\r\n\t\t\tmax={1}\r\n\t\t\tstep={0.01}\r\n\t\t/>\r\n\t\t<SliderInput\r\n\t\t\ttitle=\"Distance Scale Max\"\r\n\t\t\tvalue={settings.distanceScaleMax}\r\n\t\t\tonChange={val => setSettings(prev => ({ ...prev, distanceScaleMax: val }))}\r\n\t\t\tmin={0}\r\n\t\t\tmax={1}\r\n\t\t\tstep={0.01}\r\n\t\t/>\r\n\t</SettingsStyle>\r\n}\r\n\r\n\r\nexport default Settings\r\n\r\n// moment.defaultFormat()\r\n/*\r\nto install date stuff\r\nnpm i date-fns npm i npm i @date-io/moment@1.x  @material-ui/pickers\r\n*/\r\n","import React from 'react';\r\nimport { styled } from '@material-ui/core/styles';\r\nimport p5 from 'p5';\r\n\r\n\r\nconst getCelestialBodies = require('./celestialBodies/celestialBodies');\r\nconst { dateTo2000Offset, deg2rad, millisInDay } = require('./celestialBodies/utility');\r\n\r\nconst CanvasContainerStyle = styled('div')({\r\n\tmargin: '1rem',\r\n})\r\n// let day = getDaysFrom2000(1991, 11, 29)\r\n\r\n\r\n\r\nconst Sketch = ({ settingsRef, setSettings }) => {\r\n\r\n\tconst parentRef = React.createRef()\r\n\t// const un\r\n\r\n\tReact.useEffect(_ => {\r\n\t\tconst parent = parentRef.current\r\n\t\tconst { width, height } = parent.getBoundingClientRect()\r\n\t\tconst u = Math.min(width, height) * 0.01\r\n\t\tconst sketchRadius = u * 50\r\n\t\tconst distScale = u * 45\r\n\t\tconst bodySize = u * 6\r\n\t\tconst textSize = u * 3\r\n\t\tlet lastFrameMillis\r\n\r\n\t\tconst sketch = new p5(p => {\r\n\t\t\tp.setup = _ => {\r\n\t\t\t\tp.createCanvas(width, height)\r\n\t\t\t\t\t.parent(parent)\r\n\t\t\t\tp.stroke(127, 127, 76)\r\n\t\t\t\t// p.background(102, 255, 178)\r\n\t\t\t\tp.fill(255, 255, 153)\r\n\t\t\t\tp.textAlign(p.CENTER, p.CENTER)\r\n\t\t\t\tp.textSize(textSize)\r\n\t\t\t\tlastFrameMillis = Date.now()\r\n\t\t\t}\r\n\t\t\tp.draw = _ => {\r\n\t\t\t\t// p.background(102, 255, 178)\r\n\t\t\t\tp.background(0, 0, 32)\r\n\t\t\t\t// p.background('rgba(0,0,0,0.0001)')\r\n\t\t\t\tp.translate(p.width / 2, p.height / 2)\r\n\t\t\t\tdrawZodiac()\r\n\r\n\r\n\t\t\t\tconst thisFrameMillis = Date.now()\r\n\t\t\t\tconst deltaMillis = thisFrameMillis - lastFrameMillis\r\n\t\t\t\tlastFrameMillis = thisFrameMillis\r\n\r\n\t\t\t\tconst dateObj = settingsRef.current.date\r\n\t\t\t\tconst lastDate = dateObj._isAMomentObject ? dateObj._d : dateObj//https://stackoverflow.com/questions/28126529/momentjs-internal-object-what-is-d-vs-i#:~:text=_i%20will%20never%20be%20a,that%20backs%20the%20moment%20object.&text=If%20you%20are%20in%20%22UTC,exhibits%20with%20the%20public%20API.\r\n\r\n\t\t\t\tconst daysPerSecond = settingsRef.current.daysPerSecond\r\n\t\t\t\tconst millis = lastDate.getTime()\r\n\t\t\t\tconst nextMillis = millis + millisInDay * daysPerSecond * deltaMillis * 0.001\r\n\t\t\t\tvar nextDate = new Date(nextMillis)\r\n\t\t\t\tsetSettings(prev => ({\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tdate: nextDate\r\n\t\t\t\t}))//new date needs to be set in order to update states\r\n\r\n\t\t\t\tconst day = dateTo2000Offset(lastDate)\r\n\r\n\t\t\t\tconst celestialBodies = getCelestialBodies(day)\r\n\r\n\t\t\t\t// drawEarthMoon(celestialBodies.earth, celestialBodies.moon)\r\n\t\t\t\tconst bodies = [\"sun\", \"mercury\", \"venus\", \"earth\", \"mars\", \"jupiter\", \"saturn\", \"uranus\", \"neptune\"]\r\n\t\t\t\t// const bodies = [\"sun\", \"moon\", \"mercury\", \"venus\", \"earth\", \"mars\", \"jupiter\", \"saturn\", \"uranus\", \"neptune\"]\r\n\r\n\t\t\t\tbodies.forEach(b => {\r\n\t\t\t\t\t// drawEclipticRectHelio(celestialBodies[b])\r\n\t\t\t\t\t// drawEclipticRectGeoHelio(celestialBodies[b])\r\n\t\t\t\t\tdrawEclipticSphereGeo(celestialBodies[b])\r\n\t\t\t\t})\r\n\t\t\t\t// p.noLoop()\r\n\t\t\t}\r\n\r\n\t\t\tconst zodiac = [\"Aries\", \"Taurus\", \"Gemini\", \"Cancer\", \"Leo\", \"Virgo\", \"Libra\", \"Scorpio\", \"Sagittarius\", \"Capricon\", \"Aquarius\", \"Pisces\"]\r\n\t\t\tfunction drawZodiac() {\r\n\t\t\t\tconst thetaStep = Math.PI / 6\r\n\t\t\t\tconst halfThetaStep = Math.PI / 12\r\n\t\t\t\tfor (let i = 0; i < 12; i++) {\r\n\t\t\t\t\tconst theta = i * thetaStep\r\n\t\t\t\t\tconst x1 = Math.cos(theta) * sketchRadius\r\n\t\t\t\t\tconst y1 = -Math.sin(theta) * sketchRadius\r\n\t\t\t\t\tconst x2 = Math.cos(theta + Math.PI) * sketchRadius\r\n\t\t\t\t\tconst y2 = -Math.sin(theta + Math.PI) * sketchRadius\r\n\t\t\t\t\tconst x3 = Math.cos(theta + halfThetaStep) * sketchRadius\r\n\t\t\t\t\tconst y3 = -Math.sin(theta + halfThetaStep) * sketchRadius\r\n\t\t\t\t\tp.fill(255)\r\n\t\t\t\t\tp.noStroke()\r\n\t\t\t\t\tp.text(`${zodiac[i]}`, x3, y3)\r\n\t\t\t\t\tp.stroke(255)\r\n\t\t\t\t\tp.strokeWeight(1)\r\n\t\t\t\t\tp.line(x1, y1, x2, y2)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction drawEclipticRectHelio(body) {\r\n\t\t\t\tconst pos = body.eclipticRectHelio\r\n\t\t\t\tdrawBody(body.name, pos.x, pos.y)\r\n\t\t\t}\r\n\t\t\tfunction drawEclipticRectGeo(body) {\r\n\t\t\t\tconst pos = body.eclipticRectGeo\r\n\t\t\t\tdrawBody(body.name, pos.x, pos.y)\r\n\t\t\t}\r\n\r\n\t\t\tfunction bezier(p0, p1, p2, p3, t) {\r\n\t\t\t\tconst it = 1 - t;\r\n\t\t\t\treturn Math.pow(it, 3) * p0\r\n\t\t\t\t\t+ 3 * Math.pow(it, 2) * t * p1\r\n\t\t\t\t\t+ 3 * it * Math.pow(t, 2) * p2\r\n\t\t\t\t\t+ Math.pow(t, 3) * p3;\r\n\t\t\t}\r\n\r\n\t\t\tfunction iterateBezier(p0, p1, p2, p3, t, iterations) {\r\n\t\t\t\tfor (let i = 0; i < iterations; i++) {\r\n\t\t\t\t\tt = bezier(p0, p1, p2, p3, t)\r\n\t\t\t\t}\r\n\t\t\t\treturn t\r\n\t\t\t}\r\n\r\n\t\t\tfunction drawEclipticSphereGeo(body) {\r\n\t\t\t\tconst { radius, longitude } = body.eclipticSphereGeo\r\n\t\t\t\tlet r = radius / 35\r\n\t\t\t\tr = iterateBezier(0,\r\n\t\t\t\t\tsettingsRef.current.distanceScaleMin,\r\n\t\t\t\t\tsettingsRef.current.distanceScaleMax,\r\n\t\t\t\t\t1,\r\n\t\t\t\t\tr,\r\n\t\t\t\t\tsettingsRef.current.distanceScaleIterations)\r\n\t\t\t\tconst theta = longitude * deg2rad\r\n\t\t\t\tconst x = r * Math.cos(theta)\r\n\t\t\t\tconst y = r * Math.sin(theta)\r\n\t\t\t\tdrawBody(body.name, x, y)\r\n\t\t\t}\r\n\r\n\t\t\tfunction drawBody(name, x, y) {\r\n\t\t\t\tx *= distScale\r\n\t\t\t\ty *= -distScale\t\t//invert y axis\r\n\t\t\t\tp.noStroke()\r\n\t\t\t\tp.fill(127, 127, 127)\r\n\t\t\t\tp.ellipse(x, y, bodySize, bodySize)\r\n\t\t\t\tp.fill(255)\r\n\t\t\t\tp.text(name, x, y)\r\n\t\t\t}\r\n\t\t\t// function drawEquatorialSphereGeo(body) {\r\n\t\t\t// \tconst sphere = body.equatorialSphereGeo\r\n\t\t\t// \tconst theta = sphere.rightAscention / 24 * Math.PI * 2\r\n\t\t\t// \tconst x = Math.cos(theta)\r\n\t\t\t// \tconst y = Math.sin(theta)\r\n\t\t\t// \tdrawBody(body.name, x, y)\r\n\t\t\t// }\r\n\r\n\t\t\t// function drawEarthMoon(earth, moon) {\r\n\t\t\t// \tconst earthPos = earth.eclipticRectHelio\r\n\t\t\t// \tconst moonPos = moon.eclipticRectHelio\r\n\t\t\t// \tp.translate(earthPos.x * distScale, earthPos.y * distScale)\r\n\t\t\t// \t// p.scale(2, 2)\r\n\t\t\t// \tp.noStroke()\r\n\t\t\t// \tp.fill(127, 127, 255)\r\n\t\t\t// \tp.ellipse(0, 0, 10 * bodySize, 10 * bodySize)\r\n\t\t\t// \tconst deltaMoonPos = {\r\n\t\t\t// \t\tx: moonPos.x - earthPos.x,\r\n\t\t\t// \t\ty: moonPos.y - earthPos.y\r\n\t\t\t// \t}\r\n\t\t\t// \tconst s2 = bodySize * 10000\r\n\t\t\t// \tp.fill(0, 127, 255)\r\n\t\t\t// \tp.ellipse(deltaMoonPos.x * s2, deltaMoonPos.y * s2, 5 * bodySize, 5 * bodySize)\r\n\r\n\t\t\t// \t// const mPos = moonPos\r\n\t\t\t// \t// moonPos -= earthPos\r\n\t\t\t// }\r\n\r\n\t\t\t// const pos = body.eclipticRectGeo\r\n\t\t\t// const pos = body.eclipticRectGeo\r\n\t\t\t// const x = pos.x * distScale\r\n\t\t\t// const y = pos.y * distScale\r\n\t\t\t// const sphere = body.eclipticSphereGeo\r\n\t\t\t// const x = Math.cos(sphere.longitude / 360 * Math.PI * 2) * distScale\r\n\t\t\t// const y = Math.sin(sphere.longitude / 360 * Math.PI * 2) * distScale\r\n\t\t\t// }\r\n\t\t})\r\n\r\n\t}, [])\r\n\treturn <CanvasContainerStyle id=\"canvasContainer\" ref={parentRef} />\r\n}\r\nexport default Sketch\r\n","import React from 'react';\nimport { styled, createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport Settings from './Settings';\nimport Sketch from './Sketch';\nimport { useRefState } from './utility';\n\nconst theme = createMuiTheme({\n\tpalette: {\n\t\ttype: \"dark\",\n\t\ttext: {\n\t\t\tprimary: '#ffffff',\n\t\t\t// secondary: 'rgb(0,255,0)',\n\t\t\t// \thint: 'rgb(255,0,255)'\n\n\t\t},\n\t\t// divider: 'rgb(255,0,255)'\n\n\n\t}\n})\n\n\nconst AppStyle = styled('div')({\n\tcolor: \"white\",\n\twordWrap: 'break-word',\n\tboxSizing: \"border-box\",\n\tMozBoxSizing: \"border-box\",\n\tWebkitBoxSizing: \"border-box\",\n\tfontFamily: '\"Montserrat\", sans-serif',\n\tbackground: 'linear-gradient(45deg, rgb(0,0,0) 10%, rgb(0,0,64) 50%)',\n\twidth: '100vw',\n\tminHeight: '100vh',\n\tdisplay: 'grid',\n\tgridTemplateColumns: '1fr min(80rem,90%) 1fr',\n\t// gridTemplateColumns: '1fr 90% 1fr',\n\tgridTemplateRows: '3rem 1fr 2rem',\n\tgridTemplateAreas: `\n\t\"header header header\"\n\t\". content .\"\n\t\"footer footer footer\"\n\t`,\n})\n\nconst HeaderFooterStyle = styled('div')({\n\ttextAlign: \"center\",\n\tdisplay: 'grid',\n\tgridTemplateColumns: '1fr 1fr 1fr',\n\t// gridTemplateRows: '1fr 20% 1fr',\n\tgridTemplateAreas: `\n\t\". . .\"\n\t\". centered .\"\n\t\". . .\"\n\t`,\n\t\"&> *\": {\n\t\tgridArea: 'centered'\n\t},\n\t\"& h1\": {\n\t\tmargin: 0\n\t},\n\t// color: 'white',\n\tbackgroundColor: 'rgba(0,0,0,0.5)'\n})\n\nconst HeaderStyle = styled(HeaderFooterStyle)({\n\tgridArea: 'header',\n\n})\n\nconst FooterStyle = styled(HeaderFooterStyle)({\n\tgridArea: 'footer',\n\t// verticalAlign: 'middle'\n})\n\nconst ContentStyle = styled('div')({\n\tgridArea: 'content',\n\t// padding: \"1rem\",\n\t// color: 'white',\n\tbackground: 'rgba(0,0,0,0)',\n\tdisplay: 'grid',\n\tgridTemplateColumns: 'min(20rem, 20%) 1fr',\n\t// gridTemplateRows: 'fit-content(100%) 1fr'\n})\n\n\nfunction App() {\n\n\tconst [settings, setSettings, settingsRef] = useRefState({\n\t\tdate: new Date(),\n\t\tdaysPerSecond: 1,\n\t\tdistanceScaleIterations: 5,\n\t\tdistanceScaleMin: 0.7,\n\t\tdistanceScaleMax: 0.7,\n\t})\n\treturn <ThemeProvider theme={theme}>\n\t\t<AppStyle>\n\t\t\t<HeaderStyle>\n\t\t\t\t<h1>Space Party</h1>\n\t\t\t</HeaderStyle>\n\t\t\t<ContentStyle>\n\t\t\t\t<Settings settings={settings} setSettings={setSettings} />\n\t\t\t\t<Sketch settingsRef={settingsRef} setSettings={setSettings} />\n\t\t\t</ContentStyle>\n\t\t\t<FooterStyle>\n\t\t\t\t<div>made with â™¥ by chantey</div>\n\t\t\t</FooterStyle>\n\t\t</AppStyle>\n\t</ThemeProvider>\n\n}\n\nexport default App;\n","import React from 'react';\r\n\r\nfunction useRefState(initialValue) {\r\n\tconst [state, setState] = React.useState(initialValue)\r\n\tconst stateRef = React.useRef(state)\r\n\tReact.useEffect(() => { stateRef.current = state }, [state])\r\n\treturn [state, setState, stateRef] //DIFFERENT FROM CHANTEY.ORG (state,stateRef,setState)\r\n}\r\n\r\n\r\nexport {\r\n\tuseRefState\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n\t// <React.StrictMode>\n\t<App />,\n\t//\t{/* </React.StrictMode>, */}\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.unregister();\n// serviceWorker.register();\n","\r\nfunction wrapDeg(x) {\r\n\treturn x - Math.floor(x / 360.0) * 360.0;\r\n}\r\nfunction wrapHours(x) {\r\n\treturn x - Math.floor(x / 24) * 24;\r\n}\r\nfunction cbrt(x) {\r\n\tif (x > 0.0)\r\n\t\treturn exp(log(x) / 3.0);\r\n\telse if (x < 0.0)\r\n\t\treturn -cbrt(-x);\r\n\telse /* x == 0.0 */\r\n\t\treturn 0.0;\r\n}\r\n\r\nfunction equatorialSphereToRectangular({ rightAscention, declination, radius = 1 }) {\r\n\treturn {\r\n\t\tx: radius * cos_d(rightAscention) * cos_d(declination),\r\n\t\ty: radius * sin_d(rightAscention) * cos_d(declination),\r\n\t\tz: radius * sin_d(declination)\r\n\t}\r\n}\r\n\r\nfunction eclipticalSphereToRectangular({ longitude, latitude, radius }) {\r\n\treturn {\r\n\t\tx: radius * cos_d(longitude) * cos_d(latitude),\r\n\t\ty: radius * sin_d(longitude) * cos_d(latitude),\r\n\t\tz: radius * sin_d(latitude)\r\n\t}\r\n}\r\n\r\nfunction rectangularToEquatorialSphere({ x, y, z }) {\r\n\treturn {\r\n\t\tradius: sqrt(x * x + y * y + z * z),\r\n\t\trightAscention: Math.atan2(y, x) * rad2hours,\r\n\t\tdeclination: Math.atan2(z, sqrt(x * x + y * y)) * rad2deg\r\n\t}\r\n}\r\n//yes identical to equatorial\r\nfunction rectangularToEclipticSphere({ x, y, z }) {\r\n\treturn {\r\n\t\tradius: sqrt(x * x + y * y + z * z),\r\n\t\tlongitude: Math.atan2(y, x) * rad2deg,\r\n\t\tlatitude: Math.atan2(z, sqrt(x * x + y * y)) * rad2deg\r\n\t}\r\n}\r\n\r\n\r\nfunction eclipticalToEquatorial({ x, y, z }, obl_ecl) {\r\n\treturn {\r\n\t\tx: x,\r\n\t\ty: y * cos_d(obl_ecl) - z * sin_d(obl_ecl),\r\n\t\tz: y * sin_d(obl_ecl) + z * cos_d(obl_ecl)\r\n\t}\r\n}\r\n\r\nfunction equatorialToEcliptical({ x, y, z }, obl_ecl) {\r\n\treturn {\r\n\t\tx: x,\r\n\t\ty: y * cos_d(-obl_ecl) - z * sin_d(-obl_ecl),\r\n\t\tz: y * sin_d(-obl_ecl) + z * cos_d(-obl_ecl)\r\n\t}\r\n}\r\n// const earthTiltRad = earthTiltDeg * deg2rad\r\n\r\nconst deg2rad = Math.PI / 180\r\nconst rad2deg = 180 / Math.PI\r\nconst rad2hours = 12 / Math.PI;\r\nconst hours2rad = Math.PI / 12;\r\nconst earthTiltDeg = 23.4393\r\nconst abs = Math.abs\r\nconst sqrt = Math.sqrt\r\nconst log = Math.log\r\nconst exp = Math.exp\r\nconst sin_d = v => Math.sin(v * deg2rad)\r\nconst cos_d = v => Math.cos(v * deg2rad)\r\nconst tan_d = v => Math.tan(v * deg2rad)\r\nconst atan2_d = (x, y) => Math.atan2(x * deg2rad, y * deg2rad) * rad2deg\r\n\r\n//millis, seconds, minutes, hours\r\nconst millisInDay = 1000 * 60 * 60 * 24\r\nconst y2000Millis = Date.UTC(2000, 0, 1)\r\n\r\n//NOT J2000, which is noon?\r\nfunction getDaysFrom2000(year, month = 0, day = 1, hour = 0, minute = 0, second = 0, millisecond = 0) {\r\n\tconst d = new Date()\r\n\td.setUTCHours(hour, minute, second, millisecond)\r\n\td.setUTCFullYear(year, month, day)\r\n\tconst utcMillis = d.getTime()\r\n\treturn 1 + (utcMillis - y2000Millis) / millisInDay;//why the one? dunno but its tested\r\n\t// return (utcMillis - y2000Millis) / millisInDay;\r\n}\r\n\r\nfunction dateTo2000Offset(date) {\r\n\tconst utcMillis = date.getTime()//utc\r\n\treturn 1 + (utcMillis - y2000Millis) / millisInDay;\r\n}\r\n\r\n// function dateToDaysFrom2000(date) {\r\n// \tconst d = new Date()\r\n// \td.getut\r\n\r\n\r\n// }\r\n\r\n\r\nconst metersPerAU = 1.4959787e+11;\r\nconst metersPerEarthRadii = 6378140.0;\r\nconst earthRadiiPerAU = metersPerAU / metersPerEarthRadii;      // 23454.779920164812\r\n\r\n\r\nmodule.exports = {\r\n\tearthRadiiPerAU,\r\n\twrapDeg,\r\n\twrapHours,\r\n\tcbrt,\r\n\tequatorialSphereToRectangular,\r\n\teclipticalSphereToRectangular,\r\n\trectangularToEquatorialSphere,\r\n\trectangularToEclipticSphere,\r\n\teclipticalToEquatorial,\r\n\tequatorialToEcliptical,\r\n\tgetDaysFrom2000,\r\n\tdateTo2000Offset,\r\n\tmillisInDay,\r\n\ty2000Millis,\r\n\tdeg2rad,\r\n\trad2deg,\r\n\trad2hours,\r\n\thours2rad,\r\n\tearthTiltDeg,\r\n\tabs,\r\n\tsqrt,\r\n\tlog,\r\n\texp,\r\n\tsin_d,\r\n\tcos_d,\r\n\ttan_d,\r\n\tatan2_d\r\n}"],"sourceRoot":""}